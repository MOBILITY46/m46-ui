{"version":3,"sources":["../../../src/tabs/index.tsx"],"names":["Tabs","colorScheme","props","value","setValue","childRefs","Map","tabListRef","left","right","hasValue","slider","setSlider","bounds","ref","scrollOffset","setScrollOffset","tabNames","Object","keys","tabs","target","current","get","container","cRect","getBoundingClientRect","width","tRect","o","console","log","scroll","x","map","tab","i","duration","backgroundColor","colors","el","set","tension","friction","mass"],"mappings":";;;;;;;;;AAAA;;AAGA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;AAIO,IAAMA,IAAmB,GAAG,SAAtBA,IAAsB,OAAsD;AAAA,8BAAnDC,WAAmD;AAAA,MAAnDA,WAAmD,iCAArC,SAAqC;AAAA,MAAvBC,KAAuB;;AACvF,kBAA0B,oBAAS,CAAT,CAA1B;AAAA;AAAA,MAAOC,KAAP;AAAA,MAAcC,QAAd;;AACA,MAAMC,SAAS,GAAG,kBAAO,IAAIC,GAAJ,EAAP,CAAlB;AACA,MAAMC,UAAU,GAAG,kBAAuB,IAAvB,CAAnB;;AACA,mBAA4B,oBAAS;AAAEC,IAAAA,IAAI,EAAE,CAAR;AAAWC,IAAAA,KAAK,EAAE,CAAlB;AAAqBC,IAAAA,QAAQ,EAAE;AAA/B,GAAT,CAA5B;AAAA;AAAA,MAAOC,MAAP;AAAA,MAAeC,SAAf;;AACA,oBAAwB,wBAAxB;AAAA,MAAQC,MAAR,eAAQA,MAAR;AAAA,MAAgBC,GAAhB,eAAgBA,GAAhB;;AACA,mBAAwC,oBAAS,CAAT,CAAxC;AAAA;AAAA,MAAOC,YAAP;AAAA,MAAqBC,eAArB;;AAEA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYjB,KAAK,CAACkB,IAAN,IAAc,EAA1B,CAAjB;AAEA,uBAAU,YAAM;AACd,QAAMC,MAAM,GAAGhB,SAAS,CAACiB,OAAV,CAAkBC,GAAlB,CAAsBpB,KAAtB,CAAf;AACA,QAAMqB,SAAS,GAAGjB,UAAU,CAACe,OAA7B;;AACA,QAAID,MAAJ,EAAY;AACV,UAAMI,KAAK,GAAGD,SAAH,aAAGA,SAAH,uBAAGA,SAAS,CAAEE,qBAAX,EAAd,CADU,CAGV;AACA;;AACA,UAAI,CAACD,KAAD,IAAUA,KAAK,CAACE,KAAN,KAAgB,CAA9B,EAAiC;AAC/B;AACD;;AAED,UAAMC,KAAK,GAAGP,MAAM,CAACK,qBAAP,EAAd;AACA,UAAIlB,IAAI,GAAGoB,KAAK,CAACpB,IAAN,GAAaiB,KAAK,CAACjB,IAA9B;AACA,UAAIC,KAAK,GAAGgB,KAAK,CAAChB,KAAN,GAAcmB,KAAK,CAACnB,KAAhC;AAEA,UAAME,OAAM,GAAG;AACbD,QAAAA,QAAQ,EAAE,IADG;AAEbF,QAAAA,IAAI,EAAJA,IAFa;AAGbC,QAAAA,KAAK,EAALA;AAHa,OAAf;AAMAG,MAAAA,SAAS,CAACD,OAAD,CAAT;AACD;AACF,GAxBD,EAwBG,EAxBH;AA0BA,uBAAU,YAAM;AACd,QAAMU,MAAM,GAAGhB,SAAS,CAACiB,OAAV,CAAkBC,GAAlB,CAAsBpB,KAAtB,CAAf;AACA,QAAMqB,SAAS,GAAGjB,UAAU,CAACe,OAA7B;;AACA,QAAID,MAAJ,EAAY;AACV,UAAMI,KAAK,GAAGD,SAAH,aAAGA,SAAH,uBAAGA,SAAS,CAAEE,qBAAX,EAAd,CADU,CAGV;AACA;;AACA,UAAI,CAACD,KAAD,IAAUA,KAAK,CAACE,KAAN,KAAgB,CAA9B,EAAiC;AAC/B;AACD;;AAED,UAAMC,KAAK,GAAGP,MAAM,CAACK,qBAAP,EAAd;AACA,UAAIlB,IAAI,GAAGoB,KAAK,CAACpB,IAAN,GAAaiB,KAAK,CAACjB,IAA9B;AACA,UAAIC,KAAK,GAAGgB,KAAK,CAAChB,KAAN,GAAcmB,KAAK,CAACnB,KAAhC;AAEA,UAAME,QAAM,GAAG;AACbD,QAAAA,QAAQ,EAAE,IADG;AAEbF,QAAAA,IAAI,EAAJA,IAFa;AAGbC,QAAAA,KAAK,EAALA;AAHa,OAAf;;AAMA,UAAIN,KAAK,KAAK,CAAd,EAAiB;AACfS,QAAAA,SAAS,CAACD,QAAD,CAAT;AACA;AACD;;AAED,UAAIF,KAAK,GAAGmB,KAAK,CAACD,KAAd,IAAuBxB,KAAK,GAAG,CAAnC,EAAsC;AACpCQ,QAAAA,QAAM,CAACH,IAAP,IAAeoB,KAAK,CAACD,KAArB;AACAhB,QAAAA,QAAM,CAACF,KAAP,IAAgBmB,KAAK,CAACD,KAAtB;AAEAX,QAAAA,eAAe,CAAC,UAACa,CAAD;AAAA,iBAAQA,CAAC,IAAID,KAAK,CAACD,KAAnB;AAAA,SAAD,CAAf;AACD,OALD,MAKO,IAAInB,IAAI,GAAGoB,KAAK,CAACD,KAAjB,EAAwB;AAC7BhB,QAAAA,QAAM,CAACH,IAAP,IAAeoB,KAAK,CAACD,KAArB;AACAhB,QAAAA,QAAM,CAACF,KAAP,IAAgBmB,KAAK,CAACD,KAAtB;AAEAX,QAAAA,eAAe,CAAC,UAACa,CAAD;AAAA,iBAAQA,CAAC,IAAID,KAAK,CAACD,KAAnB;AAAA,SAAD,CAAf;AACD;;AAEDG,MAAAA,OAAO,CAACC,GAAR,CAAYC,MAAZ;AAEApB,MAAAA,SAAS,CAACD,QAAD,CAAT;AACD;AACF,GA3CD,EA2CG,CAACR,KAAD,EAAQU,MAAR,CA3CH;AA6CA,sBACE,uDACE,oBAAC,oBAAD;AAAc,IAAA,GAAG,EAAEC;AAAnB,kBACE,oBAAC,eAAD;AAAS,IAAA,GAAG,EAAEP;AAAd,kBACE,oBAAC,sBAAD;AAAgB,IAAA,OAAO,EAAE;AAAE0B,MAAAA,CAAC,EAAElB;AAAL;AAAzB,KACG,CAACE,QAAQ,IAAI,EAAb,EAAiBiB,GAAjB,CAAqB,UAACC,GAAD,EAAMC,CAAN;AAAA,wBACpB,oBAAC,eAAD;AACE,MAAA,KAAK,EAAEnC,WADT;AAEE,MAAA,GAAG,EAAEkC,GAFP;AAGE,MAAA,QAAQ,EAAEC,CAAC,KAAKjC,KAHlB;AAIE,MAAA,UAAU,EAAE;AAAEkC,QAAAA,QAAQ,EAAE;AAAZ,OAJd;AAKE,MAAA,QAAQ,EAAE;AAAEC,QAAAA,eAAe,EAAEC,cAAO,MAAP,EAAe,KAAf;AAAnB,OALZ;AAME,MAAA,GAAG,EAAE,aAACC,EAAD;AAAA,eAAQnC,SAAS,CAACiB,OAAV,CAAkBmB,GAAlB,CAAsBL,CAAtB,EAAyBI,EAAzB,CAAR;AAAA,OANP;AAOE,MAAA,KAAK,EAAE;AAAA,eAAMpC,QAAQ,CAACgC,CAAD,CAAd;AAAA;AAPT,OASGD,GATH,CADoB;AAAA,GAArB,CADH,CADF,EAgBGxB,MAAM,CAACD,QAAP,iBACC,oBAAC,cAAD;AACE,IAAA,KAAK,EAAET,WADT;AAEE,IAAA,UAAU,EAAE;AACVyC,MAAAA,OAAO,EAAE,GADC;AAEVC,MAAAA,QAAQ,EAAE,EAFA;AAGVC,MAAAA,IAAI,EAAE;AAHI,KAFd;AAOE,IAAA,OAAO,EAAE,KAPX;AAQE,IAAA,OAAO,EAAE;AACPpC,MAAAA,IAAI,EAAEG,MAAM,CAACH,IADN;AAEPC,MAAAA,KAAK,EAAEE,MAAM,CAACF;AAFP;AARX,IAjBJ,CADF,CADF,eAmCE,oBAAC,YAAD;AAAO,IAAA,KAAK,EAAEN;AAAd,KACGc,QAAQ,CAACiB,GAAT,CAAa,UAACC,GAAD;AAAA,wBACZ;AAAI,MAAA,GAAG,EAAEA;AAAT,OAAejC,KAAK,CAACkB,IAAN,CAAWe,GAAX,CAAf,CADY;AAAA,GAAb,CADH,CAnCF,CADF;AA2CD,CA5HM","sourcesContent":["import * as React from 'react'\nimport { FC } from 'react'\nimport { useState, useEffect, useRef } from 'react'\nimport { useMeasure } from '../utils'\nimport { TabContainer, TabList, TabItem, Slider, TabItemWrapper } from './styles'\nimport { colors } from '../theme'\n\nimport { Pager } from './pager'\n\nimport { TabsProps } from './types'\n\nexport const Tabs: FC<TabsProps> = ({ colorScheme = 'primary', ...props }: TabsProps) => {\n  const [value, setValue] = useState(0)\n  const childRefs = useRef(new Map())\n  const tabListRef = useRef<HTMLDivElement>(null)\n  const [slider, setSlider] = useState({ left: 0, right: 0, hasValue: false })\n  const { bounds, ref } = useMeasure()\n  const [scrollOffset, setScrollOffset] = useState(0)\n\n  const tabNames = Object.keys(props.tabs || {})\n\n  useEffect(() => {\n    const target = childRefs.current.get(value)\n    const container = tabListRef.current\n    if (target) {\n      const cRect = container?.getBoundingClientRect()\n\n      // when container is `display: none`, width === 0.\n      // ignore this case\n      if (!cRect || cRect.width === 0) {\n        return\n      }\n\n      const tRect = target.getBoundingClientRect()\n      let left = tRect.left - cRect.left\n      let right = cRect.right - tRect.right\n\n      const slider = {\n        hasValue: true,\n        left,\n        right,\n      }\n\n      setSlider(slider)\n    }\n  }, [])\n\n  useEffect(() => {\n    const target = childRefs.current.get(value)\n    const container = tabListRef.current\n    if (target) {\n      const cRect = container?.getBoundingClientRect()\n\n      // when container is `display: none`, width === 0.\n      // ignore this case\n      if (!cRect || cRect.width === 0) {\n        return\n      }\n\n      const tRect = target.getBoundingClientRect()\n      let left = tRect.left - cRect.left\n      let right = cRect.right - tRect.right\n\n      const slider = {\n        hasValue: true,\n        left,\n        right,\n      }\n\n      if (value === 0) {\n        setSlider(slider)\n        return\n      }\n\n      if (right < tRect.width && value > 1) {\n        slider.left -= tRect.width\n        slider.right += tRect.width\n\n        setScrollOffset((o) => (o -= tRect.width))\n      } else if (left < tRect.width) {\n        slider.left += tRect.width\n        slider.right -= tRect.width\n\n        setScrollOffset((o) => (o += tRect.width))\n      }\n\n      console.log(scroll)\n\n      setSlider(slider)\n    }\n  }, [value, bounds])\n\n  return (\n    <>\n      <TabContainer ref={ref}>\n        <TabList ref={tabListRef}>\n          <TabItemWrapper animate={{ x: scrollOffset }}>\n            {(tabNames || []).map((tab, i) => (\n              <TabItem\n                color={colorScheme}\n                key={tab}\n                isActive={i === value}\n                transition={{ duration: 0.3 }}\n                whileTap={{ backgroundColor: colors['gray']['400'] }}\n                ref={(el) => childRefs.current.set(i, el)}\n                onTap={() => setValue(i)}\n              >\n                {tab}\n              </TabItem>\n            ))}\n          </TabItemWrapper>\n          {slider.hasValue && (\n            <Slider\n              color={colorScheme}\n              transition={{\n                tension: 190,\n                friction: 70,\n                mass: 0.4,\n              }}\n              initial={false}\n              animate={{\n                left: slider.left,\n                right: slider.right,\n              }}\n            />\n          )}\n        </TabList>\n      </TabContainer>\n      <Pager value={value}>\n        {tabNames.map((tab) => (\n          <li key={tab}>{props.tabs[tab]}</li>\n        ))}\n      </Pager>\n    </>\n  )\n}\n"],"file":"index.js"}